# Задание:

Secure-T тестовое

Разработать backend приложение с системой древовидных комментариев (как на pikabu.ru).

Функциональность:
- регистрация и авторизация пользователей
- CRUD постов
- CRUD комментариев (комментарии привязываются либо к посту, либо к другому комментарию)
- REST API

Условия:
- исходники на GitHub
- фреймворк — Django либо FastAPI

Также на свое усмотрение можешь реализовать дополнительный функционал, это тоже будет учитываться нашими специалистами при оценке результатов.

# Описание решения

- Проект реализован на FastAPI с SQLAlchemy в качестве ORM.
- Для авторизации используется jwt авторизация, где в payload кладется user_id.
- Написаны функциональные тесты на PyTest

# Запуск

``` docker compose up --build ```

Для проведения миграций надо зайти в контейнер

``` docker exec -it secure-t-api```

Перейти в папку alemic и запустить их
``` cd db ```
``` alembic upgrade head ```

# Ограничения и комментарии

- Не использовал REST библиотеки, потому что для FastAPI не нашел хорошую
- Для сервиса comments потребовалось сделать рекурсивный поиск дочерних комментариев, чтоб 
  ограничить количество корневых комментариев, но не придумал, как сделать ограничение 
  количества дочерних комментариев. Потенциально это может стать узким местом, если ответов будет много. 
  Текущее решение позволяет ограничить глубину комментариев - наложить условие по полю "level". Так можно
  частично решить проблему
- В тесты необходимо добавить больше сценариев. В целом сейчас это больше заготовка. 
  Сделать свой docker-compose для тестов. Написать фикстуру инициализации данных в бд.
- Следует сделать абстрактный класс сервисов для выполнения CRUD операций над базами данных.